<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>@akarui/aoi.panel</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.16.13/dist/css/uikit.min.css" />
	<script src="https://cdn.jsdelivr.net/npm/uikit@3.16.13/dist/js/uikit.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/uikit@3.16.13/dist/js/uikit-icons.min.js"></script>

	<!--css-->
	<link href="/assets/css/login.css" rel="stylesheet">
	<link href="/assets/css/logintw.css" rel="stylesheet">
</head>

<body class="area flex max-[300px]:block">

    <div style="position: relative; z-index: 999999;" class="rounded-r-[20px] max-[600px]:rounded-r-[0px] bg-box content-around flex justify-start pl-25 max-[600px]:pl-0 max-[600px]:block">
        <div class="flex min-[600px]-full flex-col justify-center mx-4 w-460px max-[600px]:mx-0 max-[600px]:px-6 h-[100lvh] lg:px-8 rounded-[20px]-lg">
            <div class="sm:mx-auto sm:w-full sm:max-w-sm">
                <img class="mx-auto h-30 w-auto" src="http://localhost:3000/images/aoipanel-banner.png" alt="Your Company">
                <h2 class="mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-white">Login to your account</h2>
            </div>

            <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
                <form class="space-y-6" action="javascript:validate()">
					<div>
						<label for="username" class="block text-sm font-medium leading-6 text-white">Username</label>
						<div class="mt-2 flex bg-login rounded-md">
							<i class="my-1 mx-1 w-7 max-[600px]:my-3 max-[600px]:mx-1 max-[600px]:w-10 text-white" data-lucide="user"></i>
							<input id="username" name="username" type="text" autocomplete="text" required style="margin-left: 5px;"
								class="bg-login block w-full rounded-r-md max-[600px]:py-3 min-[600px]:py-1.5 text-white shadow-sm ring-inset ring-gray-300 placeholder:text-white focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
						</div>
					</div>
				
					<div>
						<div class="flex items-center justify-between">
							<label for="password" class="block text-sm font-medium leading-6 text-white">Password</label>
						</div>
						<div class="mt-2 flex bg-login rounded-md">
							<i class="my-1 mx-1 w-7 max-[600px]:my-3 max-[600px]:mx-1 max-[600px]:w-10 text-white" data-lucide="lock"></i>
							<input id="password" name="password" type="password" autocomplete="current-password" required style="margin-left: 5px;"
								class="bg-login block w-full rounded-r-md py-1.5 text-white shadow-sm ring-inset ring-gray-300 placeholder:text-white focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
						</div>
					</div>
				
					<div>
						<button type="submit" class="flex w-full justify-center rounded-md bg-primary px-3 py-2.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Login</button>
					</div>
				</form>
				

            </div>
        </div>

    </div>

    <ul class="circles">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
		<li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>

</body>

<script src="https://unpkg.com/lucide@latest"></script>
<script>
	lucide.createIcons();
</script>
<script>
	function getParameterByName(name, url = window.location.href) {
		name = name.replace(/[\[\]]/g, '\\$&');
		var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
			results = regex.exec(url);
		if (!results) return null;
		if (!results[2]) return '';
		return decodeURIComponent(results[2].replace(/\+/g, ' '));

	}

	if (getParameterByName("loggedout") == "true") { localStorage.setItem("login", "false") }
	//if(localStorage.getItem("login")=="true"){window.location.href="/panel";}
	/*if(localStorage.getItem("login")=="true"){
	  document.getElementById("loginbutton").innerHTML=`<button type="button" class="button btn-primary flexbox hide-mediumsc hide-smallsc" style="width: 10%;" type="button"  onclick="javascript:window.location.href='/panel'">
			  <ion-icon name="folder-open-outline"></ion-icon> Open <div class="btn-secondary" ></div>
		  </button>
		  <button type="button" class="button btn-primary flexbox hide-largesc" style="width: 40%;" type="button" onclick="javascript:window.location.href='/panel'">
			  <ion-icon name="folder-open-outline"></ion-icon> Open <div class="btn-secondary" ></div>
		  </button>`
	}*/


	async function validate() {
		let password = document.getElementById("password").value;
		let username = document.getElementById("username").value;

		const response = await fetch("/pass/validate", {
			method: "POST",
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({
				username: username,
				password: password
			})
		})
		const json = await response.json();
		if (json.data == true) {
			localStorage.setItem("login", "true");
			window.location.href = "/login?username=" + username + "&password=" + password;
		}
		else {
			UIkit.notification({
				message: 'Invalid Username / Password!',
				status: 'danger',
				pos: 'bottom-left',
				timeout: 5000
			});
		}
	}
	async function validate2() {
		let password = document.getElementById("password2").value;
		let username = document.getElementById("username2").value;
		const response = await fetch("/pass/validate", {
			method: "POST",
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify({
				username: username,
				password: password
			})
		})
		const json = await response.json();
		if (json.data == true) {
			localStorage.setItem("login", "true");
			window.location.href = "/login?username=" + username + "&password=" + password;
		}
		else {
			UIkit.notification({
				message: 'Invalid Username / Password!',
				status: 'danger',
				pos: 'bottom-left',
				timeout: 5000
			});
		}
	}	
</script>


</html>